(()=>{var e={};e.id=377,e.ids=[377],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},96206:e=>{"use strict";e.exports=require("console")},6113:e=>{"use strict";e.exports=require("crypto")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},15673:e=>{"use strict";e.exports=require("node:events")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},77282:e=>{"use strict";e.exports=require("process")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},35356:e=>{"use strict";e.exports=require("stream/web")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},29830:e=>{"use strict";e.exports=require("util/types")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},20015:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>l});var s=t(50482),a=t(69108),i=t(62563),n=t.n(i),o=t(68300),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);t.d(r,c);let l=["",{children:["refer",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,20752)),"/Users/mudit/workspace/staffing/elega/src/app/refer/dashboard/page.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,79175)),"/Users/mudit/workspace/staffing/elega/src/app/refer/dashboard/layout.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,36345)),"/Users/mudit/workspace/staffing/elega/src/app/refer/layout.js"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,51965)),"/Users/mudit/workspace/staffing/elega/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/mudit/workspace/staffing/elega/src/app/refer/dashboard/page.js"],u="/refer/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/refer/dashboard/page",pathname:"/refer/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},77299:(e,r,t)=>{Promise.resolve().then(t.bind(t,77341))},20406:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(95344);function a(e){return s.jsx("div",{className:`w-full lg:w-3/5 mx-auto ${e.className}`,children:s.jsx("div",{className:"border-t border-customGrayBorder"})})}},81038:(e,r,t)=>{"use strict";t.d(r,{Cz:()=>p,H_:()=>d,Me:()=>m,NA:()=>x,O_:()=>l,X1:()=>h,Xh:()=>o,bo:()=>u,gg:()=>c,sh:()=>n});var s=t(83289),a=t(29127),i=t(50712);let n={USERS:"users",REFERRALS:"referrals"},o=e=>s.EK.fromDate(e),c=e=>e.toDate().toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}),l=e=>{let r=e.toDate(),t=new Date;return r.getMonth()===t.getMonth()};async function d(e,r){let t=null,s=null;try{t=await (0,a.ET)((0,a.hJ)(i.db,e),r)}catch(e){console.error(e),s=e}return{result:t,error:s}}async function u(e,r,t){let s=null,n=null;try{s=await (0,a.pl)((0,a.JU)(i.db,e,r),t,{merge:!0})}catch(e){console.error(e),n=e}return{result:s,error:n}}async function m(e,r){let t=(0,a.JU)(i.db,e,r),s=null,n=null;try{s=await (0,a.QT)(t)}catch(e){console.error(e),n=e}return{result:s,error:n}}async function h(e,r,t,s){let n=null,o=null;try{let o=(0,a.hJ)(i.db,e),c=(0,a.IO)(o,(0,a.ar)(r,t,s));n=await (0,a.PL)(c)}catch(e){console.error(e),o=e}return{result:n,error:o}}async function x(e,r,t,s,n,o,c){let l=null,d=null;try{let d=(0,a.hJ)(i.db,e),u=(0,a.IO)(d,(0,a.ar)(r,t,s),(0,a.ar)(n,o,c));l=await (0,a.PL)(u)}catch(e){console.error(e),d=e}return{result:l,error:d}}async function p(e,r,t,s,a,i,n){let o=await x(e,r,t,s,a,i,n);return!o?.result?.hasError&&o?.result?.size>0}},77341:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var s=t(95344),a=t(42963),i=t(3729),n=t(20406),o=t(47674),c=t(81038),l=t(8014),d=t(90078),u=t.n(d);function m(){let{data:e}=(0,o.useSession)(),[r,t]=(0,i.useState)([]),[d,m]=(0,i.useState)(!0),[h,x]=(0,i.useState)({monthlyReferrals:0,successRate:0,totalReferrals:0});return((0,i.useEffect)(()=>{let{user:r}=e,s=l.Z.get("refId");async function a(){if(s){let[{result:e},t]=await Promise.all([(0,c.Me)("referrals",s),(0,c.Cz)("referrals","userId","==",r.id,"status","!=","Email Sent")]),a=e.data();a?.status!=="Email Sent"||a.referredByUserId===r.id||t||await (0,c.bo)("referrals",s,{status:"Under Review",userId:r.id}),l.Z.remove("refId")}}(async function(){let{result:e,error:s}=await (0,c.X1)("referrals","referredByUserId","==",r.id),a=[],i=0,n=0;u()(e)||(e.forEach(e=>{let r=e.data();a.push({id:e.id,linkedInUrl:r.linkedInUrl,email:r.email,status:r.status,referredOn:(0,c.gg)(r.referredOn)}),(0,c.O_)(r.referredOn)&&i++,"Hired"===r.status&&n++}),t(a),x({monthlyReferrals:i,successRate:a.length>0?(100*n/a.length).toFixed(1):0,totalReferrals:a.length}))})().then(()=>{m(!1)}),a()},[]),d)?s.jsx(a.Z,{}):(0,s.jsxs)("div",{className:"container-fluid !bg-customDarkBg1 !h-screen !pr-0 !pb-2",children:[(0,s.jsxs)("div",{className:"row",children:[s.jsx("div",{className:"col-lg-4",children:s.jsx("div",{className:"card !shadow-lg overflow-hidden !bg-customDarkBg2",children:(0,s.jsxs)("div",{className:"card-body p-4",children:[s.jsx("h5",{className:"mb-9 fw-semibold text-customSecondary",children:"Monthly Referrals"}),(0,s.jsxs)("div",{className:"row align-items-center",children:[(0,s.jsxs)("h4",{className:"fw-semibold mb-3 text-xxl text-white",children:[s.jsx("h1",{className:"fw-semibold mb-3 text-xxl text-white",children:h.monthlyReferrals})," out of 5"]}),s.jsx("div",{className:"col-4",children:s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("div",{id:"breakup"})})})]})]})})}),s.jsx("div",{className:"col-lg-4",children:s.jsx("div",{className:"card !shadow-lg overflow-hidden !bg-customDarkBg2",children:(0,s.jsxs)("div",{className:"card-body p-4",children:[s.jsx("h5",{className:"mb-9 fw-semibold text-customSecondary",children:"Success Rate"}),(0,s.jsxs)("div",{className:"row align-items-center w-full",children:[(0,s.jsxs)("h4",{className:"fw-semibold mb-3 text-xxl text-white",children:[(0,s.jsxs)("h1",{className:"fw-semibold mb-3 text-xxl text-white",children:[h.successRate,"%"]}),"out of ",h.totalReferrals," referrals"]}),s.jsx("div",{className:"col-4",children:s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("div",{id:"breakup"})})})]})]})})})]}),s.jsx("div",{className:"row w-full",children:s.jsx("div",{className:"col-lg-16 d-flex align-items-stretch",children:s.jsx("div",{className:"card !shadow-lg w-100 !bg-customDarkBg2 pb-4",children:(0,s.jsxs)("div",{className:"card-body p-4 !pr-0",children:[s.jsx("div",{className:"table-responsive mb-10 max-h-[50vh] !pr-10",children:(0,s.jsxs)("table",{className:"table text-nowrap mb-0 align-middle",children:[s.jsx("thead",{className:"sticky top-0 text-dark fs-4 !border-b-2 !border-customGrayBorder !bg-customDarkBg2",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"border-bottom-4",children:s.jsx("h6",{className:"fw-semibold mb-0 text-customSecondary",children:"Email"})}),s.jsx("th",{className:"border-bottom-2",children:s.jsx("h6",{className:"fw-semibold mb-0 text-customSecondary",children:"LinkedIn"})}),s.jsx("th",{className:"border-bottom-2",children:s.jsx("h6",{className:"fw-semibold mb-0 text-customSecondary",children:"Status"})}),s.jsx("th",{className:"border-bottom-2",children:s.jsx("h6",{className:"fw-semibold mb-0 text-customSecondary text-right",children:"Referred On"})})]})}),s.jsx("tbody",{children:r.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"border-bottom-0",children:s.jsx("h6",{className:"fw-semibold mb-1 text-white",children:e.email})}),s.jsx("td",{className:"border-bottom-0 text-white",children:s.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:e.linkedInUrl,className:"mb-0 fw-normal text-white",children:e.linkedInUrl})}),s.jsx("td",{className:"border-bottom-0",children:s.jsx("div",{className:"d-flex align-items-center gap-2",children:s.jsx("span",{className:"badge rounded-3 fw-semibold text-white bg-"+function(e){switch(e){case"Active":return"secondary";case"Under Review":return"danger";case"Hired":return"success";default:return"primary"}}(e.status),children:e.status})})}),s.jsx("td",{className:"border-bottom-0",children:s.jsx("h6",{className:"fw-semibold mb-0 fs-4 text-white text-right",children:e.referredOn})})]},e.id))})]})}),s.jsx(n.Z,{className:"!w-full"})]})})})})]})}var h=t(50712),x=t(46282);let p=function(){let{data:e}=(0,o.useSession)(),[r,t]=(0,i.useState)(!1),n=async e=>{let r=await fetch("/api/createCustomToken",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e.user})}),s=await r.json();(0,x._p)(h.I,s.token).then(e=>{e.user,t(!0)}).catch(e=>{console.log(e.code,e.message)})};return((0,i.useEffect)(()=>{e&&n(e)},[e]),r)?s.jsx(m,{}):s.jsx(a.Z,{})}},20752:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let s=(0,t(86843).createProxy)(String.raw`/Users/mudit/workspace/staffing/elega/src/app/refer/dashboard/page.js`),{__esModule:a,$$typeof:i}=s,n=s.default},8014:(e,r,t)=>{"use strict";/*! js-cookie v3.0.5 | MIT */function s(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)e[s]=t[s]}return e}t.d(r,{Z:()=>a});var a=function e(r,t){function a(e,a,i){if("undefined"!=typeof document){"number"==typeof(i=s({},t,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var o in i)i[o]&&(n+="; "+o,!0!==i[o]&&(n+="="+i[o].split(";")[0]));return document.cookie=e+"="+r.write(a,e)+n}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},a=0;a<t.length;a++){var i=t[a].split("="),n=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(s[o]=r.read(n,o),e===o)break}catch(e){}}return e?s[e]:s}},remove:function(e,r){a(e,"",s({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,s({},this.attributes,r))},withConverter:function(r){return e(s({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,852,337,593,474,78,523],()=>t(20015));module.exports=s})();